# =============================================================================
# USV系统参数配置文件
# 该文件定义了USV系统中各节点的参数配置
# =============================================================================

# =============================================================================
# 飞控通信模块参数 (MAVROS)
# 
# 多 USV 机载计算机的 system_id 配置说明:
# 
# 场景: 多台独立 USV,每台有自己的机载计算机(gauss02/gauss03)和飞控
# 
# system_id 设置原则:
# 1. 每个机载计算机使用唯一的 system_id (推荐: usv_02用2, usv_03用3)
# 2. 所有飞控统一使用 system_id=1 (ArduPilot 标准)
# 3. 地面站使用 system_id=255 (GCS 标准)
# 
# MAVLink 路由工作原理:
# - 飞控会记住"从哪个串口收到哪个 sysid 的消息"
# - 当收到目标为某 sysid 的消息时,飞控会转发到对应串口
# - 这样地面站(sysid=255)可以通过飞控与机载电脑(sysid=2/3)通信
# 
# ⚠️ 关键: target_system_id 必须设为 1 (飞控ID),否则无法接收飞控心跳!
# =============================================================================
mavros:
  ros__parameters:
    # 连接参数（保留作为默认值）
    conn:
      timeout: 10.0
      heartbeat_mav_type: 6
      heartbeat_rate: 1.0
    vision_pose:
      enable: true

# =============================================================================
# 通信与状态管理模块参数
# =============================================================================
"/**/usv_status_node":
  ros__parameters:
    battery_voltage_full: 12.6
    battery_voltage_empty: 10.8

"/**/navigate_to_point_node":
  ros__parameters:
    nav_arrival_threshold: 1.0
    nav_timeout_check_period: 1.0
    nav_feedback_period: 0.5
    distance_mode: '3d'

# =============================================================================
# 控制模块参数
# =============================================================================
"/**/usv_avoidance_node":
  ros__parameters:
    in_distance_value: 1.0

"/**/usv_command_node":
  ros__parameters:
    supported_modes: ['OFFBOARD', 'MANUAL', 'STABILIZED', 'AUTO.LOITER', 'AUTO.MISSION', 'AUTO.RTL', 'POSCTL']
    service_timeout_sec: 5.0
    arming_command_timeout_sec: 10.0

"/**/usv_control_node":
  ros__parameters:
    publish_rate: 20.0
    frame_id: 'map'
    coordinate_frame: 8
    platform_mode: '3d'
    use_setpoint_6dof: true

# =============================================================================
# 传感器驱动模块参数
# =============================================================================
"/**/usv_uwb_node":
  ros__parameters:
    dummy_param: true

# =============================================================================
# 辅助功能模块参数
# =============================================================================
"/**/usv_head_action_node":
  ros__parameters:
    enable_head_actuator: true

"/**/usv_fan_node":
  ros__parameters:
    fan_pin: 17
    gpio_chip: gpiochip4
    temp_threshold_on: 50000
    temp_threshold_off: 45000

"/**/usv_led_node":
  ros__parameters:
    port: /dev/ttyUSB1
    baudrate: 115200
    color_list: [255, 0, 0, 255, 127, 0, 255, 255, 0, 0, 255, 0, 0, 255, 255, 0, 0, 255, 139, 0, 255]
    timer_period_high: 0.03
    timer_period_low: 0.5
    transition_duration: 3.0
    hold_duration: 10.0
    breath_step: 6

"/**/usv_sound_node":
  ros__parameters:
    sound_types: ['gaga101', 'gaga102', 'gaga103', 'gaga104']
    moon_type: 'moon101'
    min_play_interval: 2
    max_play_interval: 10
    min_play_count: 1
    max_play_count: 3
