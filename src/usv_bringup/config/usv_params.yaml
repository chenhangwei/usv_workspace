# =============================================================================
# Copyright (c) 2026 chenhangwei
# 
# This file is part of the USV Workspace project.
# 
# Configuration parameters for usv_params.
#
# Author: chenhangwei
# Date: 2026-01-26
# =============================================================================
# =============================================================================
# USVç³»ç»Ÿå‚æ•°é…ç½®æ–‡ä»¶
# è¯¥æ–‡ä»¶å®šä¹‰äº†USVç³»ç»Ÿä¸­å„èŠ‚ç‚¹çš„å‚æ•°é…ç½®
# =============================================================================

# =============================================================================
# é£æ§é€šä¿¡æ¨¡å—å‚æ•° (MAVROS)
# 
# å¤š USV æœºè½½è®¡ç®—æœºçš„ system_id é…ç½®è¯´æ˜:
# 
# åœºæ™¯: å¤šå°ç‹¬ç«‹ USV,æ¯å°æœ‰è‡ªå·±çš„æœºè½½è®¡ç®—æœº(gauss02/gauss03)å’Œé£æ§
# 
# system_id è®¾ç½®åŸåˆ™:
# 1. æ¯ä¸ªæœºè½½è®¡ç®—æœºä½¿ç”¨å”¯ä¸€çš„ system_id (æ¨è: usv_02ç”¨2, usv_03ç”¨3)
# 2. æ‰€æœ‰é£æ§ç»Ÿä¸€ä½¿ç”¨ system_id=1 (ArduPilot æ ‡å‡†)
# 3. åœ°é¢ç«™ä½¿ç”¨ system_id=255 (GCS æ ‡å‡†)
# 
# MAVLink è·¯ç”±å·¥ä½œåŸç†:
# - é£æ§ä¼šè®°ä½"ä»å“ªä¸ªä¸²å£æ”¶åˆ°å“ªä¸ª sysid çš„æ¶ˆæ¯"
# - å½“æ”¶åˆ°ç›®æ ‡ä¸ºæŸ sysid çš„æ¶ˆæ¯æ—¶,é£æ§ä¼šè½¬å‘åˆ°å¯¹åº”ä¸²å£
# - è¿™æ ·åœ°é¢ç«™(sysid=255)å¯ä»¥é€šè¿‡é£æ§ä¸æœºè½½ç”µè„‘(sysid=2/3)é€šä¿¡
# 
# âš ï¸ å…³é”®: target_system_id å¿…é¡»è®¾ä¸º 1 (é£æ§ID),å¦åˆ™æ— æ³•æ¥æ”¶é£æ§å¿ƒè·³!
# =============================================================================
mavros:
  ros__parameters:
    # ==================== MAVLink èº«ä»½é…ç½® ====================
    # æ³¨æ„: system_id/target_system_id ç­‰å‚æ•°å·²ç§»è‡³ launch æ–‡ä»¶ä¸­é…ç½®
    # è¯·åœ¨ usv_launch.py ä¸­ä¿®æ”¹ target_system_id:
    # - usv_02: target_system_id = 2 (åŒ¹é…é£æ§ SYSID_THISMAV=2)
    # - usv_03: target_system_id = 3 (åŒ¹é…é£æ§ SYSID_THISMAV=3)
    
    # ==================== æ’ä»¶é…ç½®ï¼ˆå·²ç§»è‡³ launch æ–‡ä»¶ï¼‰====================
    # âš ï¸ æ’ä»¶é»‘åå•é…ç½®å·²ç§»è‡³ usv_launch.pyï¼Œæ­¤å¤„é…ç½®å·²å¤±æ•ˆ
    # è¯·åœ¨ launch æ–‡ä»¶ä¸­ä¿®æ”¹ plugin_blacklist å‚æ•°
    # 
    # ä¿ç•™çš„æ ¸å¿ƒæ’ä»¶ï¼ˆ15ä¸ªï¼‰ï¼š
    # sys_status, sys_time, command, local_position, global_position,
    # home_position, gps_status, battery, imu, rc_io, setpoint_raw,
    # waypoint, rallypoint, geofence, vfr_hud
    
    # ==================== æ€§èƒ½ä¼˜åŒ–å‚æ•°ï¼ˆå·²ç§»è‡³ launch æ–‡ä»¶ï¼‰====================
    # ä»¥ä¸‹å‚æ•°å·²åœ¨ launch æ–‡ä»¶ä¸­é…ç½®ï¼Œæ­¤å¤„ä¿ç•™ä»…ä½œä¸ºæ–‡æ¡£å‚è€ƒ
    # sys.disable_diag: true
    # mission.pull_after_gcs: false
    # waypoint.pull_after_gcs: false
    # rallypoint.pull_after_gcs: false
    # geofence.pull_after_gcs: false
    
    # è¿æ¥å‚æ•°ï¼ˆä¿ç•™ä½œä¸ºé»˜è®¤å€¼ï¼‰
    conn:
      timeout: 10.0                         # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
      heartbeat_mav_type: 6                 # MAV_TYPE_SURFACE_BOAT
      heartbeat_rate: 1.0                   # å¿ƒè·³é¢‘ç‡ï¼ˆHzï¼‰
      
    # è§†è§‰å®šä½é…ç½®
    vision_pose:
      enable: false                         # ç¦ç”¨è§†è§‰å®šä½

# =============================================================================
# é€šä¿¡ä¸çŠ¶æ€ç®¡ç†æ¨¡å—å‚æ•°
# =============================================================================
/**/usv_status_node:
  ros__parameters:
    # ç”µæ± ç”µå‹èŒƒå›´é…ç½®ï¼ˆåŸºäºå®é™…ç”µæ± ç‰¹æ€§ï¼‰
    battery_voltage_full: 12.6              # æ»¡ç”µç”µå‹ï¼ˆVï¼‰- ç”µé‡æ˜¾ç¤º100%
    battery_voltage_empty: 10.8             # ç©ºç”µç”µå‹ï¼ˆVï¼‰- ç”µé‡æ˜¾ç¤º0%ï¼Œéœ€è¦å……ç”µ

# NavigateToPoint è¯é¢˜ç‰ˆæœ¬èŠ‚ç‚¹å‚æ•°ï¼ˆlaunch å®é™…å¯åŠ¨çš„èŠ‚ç‚¹åä¸º navigate_to_point_nodeï¼‰
# âš ï¸ é˜ˆå€¼å‚æ•°è¯´æ˜ï¼šnav_arrival_threshold ä¸ velocity_controller_node.goal_tolerance å·²è‡ªåŠ¨åŒæ­¥
#    å½“é€šè¿‡è¯é¢˜ set_nav_arrival_threshold è®¾ç½®æ—¶ï¼Œä¸¤ä¸ªèŠ‚ç‚¹ä¼šåŒæ—¶æ›´æ–°
/**/navigate_to_point_node:
  ros__parameters:
    nav_arrival_threshold: 1.5              # æœ€ç»ˆåˆ°è¾¾ç›®æ ‡ç‚¹çš„è·ç¦»é˜ˆå€¼ï¼ˆç±³ï¼‰- ä¸ velocity_controller.goal_tolerance åŒæ­¥
    nav_switch_threshold: 1.5               # å¹³æ»‘å¯¼èˆªæ—¶åˆ‡æ¢ä¸‹ä¸€ä¸ªèˆªç‚¹çš„è·ç¦»é˜ˆå€¼ï¼ˆç±³ï¼‰
                                            # è°ƒå‚å»ºè®® (é¿å…ä¸­é—´èˆªç‚¹åœé¡¿):
                                            #   - ä»æœ‰åœé¡¿ â†’ è°ƒå¤§åˆ° 2.0~3.0
                                            #   - åˆ‡å¼¯è¿‡æ—©/æ‰ç‚¹ â†’ ä¿æŒ 1.5 æˆ–æ›´å°
    nav_smooth_navigation: true             # æ˜¯å¦å¯ç”¨å¹³æ»‘å¯¼èˆªæ¨¡å¼ï¼ˆè¿ç»­è¿½è¸ªä¸åœé¡¿ï¼‰
    nav_feedback_period: 0.2                # åé¦ˆå‘å¸ƒå‘¨æœŸï¼ˆç§’ï¼‰
    distance_mode: '2d'                     # è·ç¦»è®¡ç®—æ¨¡å¼ï¼š'2d'ï¼ˆä»…XYå¹³é¢ï¼‰æˆ– '3d'ï¼ˆåŒ…å«Zè½´ï¼‰
    waypoint_queue_size: 10                 # èˆªç‚¹é˜Ÿåˆ—å¤§å°ï¼ˆæ”¯æŒé¢„å‘é€ï¼‰
    idle_timeout_sec: 30.0                  # ç©ºé—²ä¿æŠ¤è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰- é˜Ÿåˆ—ç©ºä¸”æ— æ–°èˆªç‚¹æ—¶å‘Šè­¦
    idle_protection_enabled: true           # æ˜¯å¦å¯ç”¨ç©ºé—²ä¿æŠ¤

# Auto Set Home å‚æ•°ï¼ˆå…³é”®ï¼šå»¶é•¿ GPS åˆå§‹åŒ–æ—¶é—´ï¼Œé¿å… z åæ ‡è¯¯å·®ï¼‰
/**/auto_set_home_node:
  ros__parameters:
    set_delay_sec: 10.0                     # GPS é«˜åº¦æ”¶æ•›ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œå»ºè®® 8-15 ç§’
    use_current_gps: true                   # ä½¿ç”¨å½“å‰ GPS ä½ç½®ä½œä¸º Home ç‚¹

# =============================================================================
# GPS åæ ‡è½¬æ¢æ¨¡å—å‚æ•°ï¼ˆç»Ÿä¸€çš„ GPS åŸç‚¹é…ç½®ï¼‰
# 
# âš ï¸ é‡è¦è¯´æ˜ï¼š
# æ‰€æœ‰ USV ä½¿ç”¨ç»Ÿä¸€çš„ GPS åŸç‚¹ï¼ˆA0 åŸºç«™ï¼‰è¿›è¡Œåæ ‡è½¬æ¢
# - gps_to_local_node: å°†é£æ§çš„ GPS ä½ç½®è½¬æ¢ä¸ºæœ¬åœ° XYZ åæ ‡
# - coord_transform_node: å°†åœ°é¢ç«™çš„ XYZ ç›®æ ‡ç‚¹è½¬æ¢ä¸º GPS åæ ‡
# 
# GPS åŸç‚¹ï¼ˆA0 åŸºç«™ï¼‰ï¼š22.5180977Â°N, 113.9007239Â°E, -5.17m
# =============================================================================

/**/gps_to_local_node:
  ros__parameters:
    gps_origin_lat: 22.5180977              # åŒ—çº¬ï¼ˆåº¦ï¼‰
    gps_origin_lon: 113.9007239             # ä¸œç»ï¼ˆåº¦ï¼‰
    gps_origin_alt: 0.0                     # æµ·æ‹”ï¼ˆç±³ï¼ŒA0 åŸºç«™å®æµ‹å€¼ï¼‰
    publish_rate: 10.0                      # å‘å¸ƒé¢‘ç‡ï¼ˆHzï¼‰ï¼Œæ¨è 10-20 Hz
    enable_gps_to_local: true               # å¯ç”¨ GPSâ†’æœ¬åœ°åæ ‡è½¬æ¢
    # UWB/ä¼ªå«æ˜Ÿåæ ‡ç³»åç§»è§’ï¼ˆåº¦ï¼‰
    # å®šä¹‰ï¼šUWB Xè½´ ä¸ åœ°ç£ä¸œ çš„å¤¹è§’ï¼ˆé€†æ—¶é’ˆä¸ºæ­£ï¼‰
    # ä¾‹å¦‚ï¼šå¦‚æœ UWB Xè½´ æŒ‡å‘åœ°ç£åŒ—åä¸œ30Â°ï¼Œåˆ™è®¾ç½®ä¸º 60Â°
    # è®¾ç½®ä¸º 0 è¡¨ç¤º UWB Xè½´ ä¸åœ°ç£ä¸œå¯¹é½ï¼ˆæ ‡å‡† ENUï¼‰
    coordinate_yaw_offset_deg: 0.0

/**/coord_transform_node:
  ros__parameters:
    gps_origin_lat: 22.5180977              # åŒ—çº¬ï¼ˆåº¦ï¼‰
    gps_origin_lon: 113.9007239             # ä¸œç»ï¼ˆåº¦ï¼‰
    gps_origin_alt: 0.0                     # æµ·æ‹”ï¼ˆç±³ï¼ŒA0 åŸºç«™å®æµ‹å€¼ï¼‰
    enable_coord_transform: true            # å¯ç”¨ XYZâ†’GPS åæ ‡è½¬æ¢ï¼ˆæ¥æ”¶åœ°é¢ç«™+é¿éšœç›®æ ‡ç‚¹ï¼‰
    use_global_position_target: true        # true=GlobalPositionTarget (æ¨è), false=GeoPoseStamped

# =============================================================================
# æ§åˆ¶æ¨¡å—å‚æ•°
# =============================================================================
/**/usv_avoidance_node:
  ros__parameters:
    # é¿éšœè·ç¦»å‚æ•°
    in_distance_value: 1.0                  # é¿éšœè§¦å‘è·ç¦»ï¼ˆç±³ï¼‰

/**/usv_command_node:
  ros__parameters:
    # æ”¯æŒçš„é£è¡Œæ¨¡å¼åˆ—è¡¨
    supported_modes: ['GUIDED', 'MANUAL', 'AUTO', 'HOLD', 'ARCO', 'STEERING','RTL']
    # æœåŠ¡è¶…æ—¶æ—¶é—´
    service_timeout_sec: 5.0                # æœåŠ¡ç­‰å¾…è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
    # è§£é”å‘½ä»¤è¶…æ—¶æ—¶é—´
    arming_command_timeout_sec: 10.0        # è§£é”å‘½ä»¤è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰

/**/usv_control_node:
  ros__parameters:
    publish_rate: 20.0                      # ç›®æ ‡ç‚¹å‘å¸ƒé¢‘ç‡ï¼ˆHzï¼‰
    frame_id: 'map'                         # åæ ‡ç³»ID
    coordinate_frame: 8                     # FRAME_LOCAL_NED = 8
    enable_local_control: false             # æ˜¯å¦å¯ç”¨å±€éƒ¨æ§åˆ¶ï¼ˆfalse=ä½¿ç”¨coord_transform_nodeçš„å…¨å±€GPSæ¨¡å¼ï¼‰
    # æ§åˆ¶æ¨¡å¼: 'position' (GPSä½ç½®æ¨¡å¼) æˆ– 'velocity' (é€Ÿåº¦æ¨¡å¼ï¼Œç”±velocity_controller_nodeå¤„ç†)
    # é€Ÿåº¦æ¨¡å¼å¯å½»åº•è§£å†³èˆªç‚¹é™„è¿‘å‡é€Ÿé—®é¢˜
    control_mode: 'velocity'                # ğŸ”§ å·²åˆ‡æ¢ä¸ºé€Ÿåº¦æ¨¡å¼ï¼Œä½¿ç”¨ velocity_controller_node

# =============================================================================
# é€Ÿåº¦æ§åˆ¶å™¨å‚æ•° (MPC æ¨¡å‹é¢„æµ‹æ§åˆ¶)
# 
# ä½¿ç”¨è¯´æ˜:
# 1. å°† usv_control_node.control_mode è®¾ç½®ä¸º 'velocity' å¯ç”¨é€Ÿåº¦æ¨¡å¼
# 2. å¯åŠ¨ velocity_controller_node èŠ‚ç‚¹
# 3. é€Ÿåº¦æ¨¡å¼ä¸‹ï¼Œå¯¼èˆªç›®æ ‡ä»å‘é€åˆ° set_usv_nav_goalï¼Œä½†ç”± velocity_controller_node å¤„ç†
# 
# ä¼˜åŠ¿:
# - é¢„æµ‹æœªæ¥è½¨è¿¹ï¼Œæ¶ˆé™¤è›‡å½¢éœ‡è¡
# - å¹³æ»‘çš„æ§åˆ¶è¾“å‡ºï¼Œä¿æŠ¤èˆµæœº
# - ç›´æ¥å¤„ç†è¿åŠ¨å­¦çº¦æŸ
# =============================================================================
/**/velocity_controller_node:
  ros__parameters:
    # æ§åˆ¶æ¨¡å¼ (å¿…é¡»ä¸ usv_control_node.control_mode ä¸€è‡´)
    control_mode: 'velocity'                # 'position' æˆ– 'velocity'
    
    # ==================== MPC å‚æ•° (æ¨¡å‹é¢„æµ‹æ§åˆ¶) ====================
    # å‚æ•°è°ƒæ•´å†å² (æ³¨æ„: YAMLå‚æ•°ä¼šè¦†ç›–Pythoné»˜è®¤å€¼):
    # 
    # v1 (1/30): q_pos=30, q_theta=5, r_w=8, r_dw=5(é»˜è®¤), w_max=0.4
    #            ç»“æœ: èˆªå‘è¯¯å·®std=39.3Â°, æŒ¯è¡é¢‘ç‡=0.39Hz â†’ å¤§æŒ¯å¹…ä½é¢‘æŒ¯è¡
    # 
    # v2 (2/02): q_pos=30, q_theta=5, r_w=8, r_dw=20(ä»£ç ä¿®æ”¹), w_max=0.4
    #            ç»“æœ: èˆªå‘è¯¯å·®std=17.8Â°(â†“55%), æŒ¯è¡é¢‘ç‡=0.47Hz(â†‘19%)
    #            åˆ†æ: r_dwâ†‘ é™åˆ¶è§’åŠ é€Ÿåº¦å˜åŒ– â†’ æŒ¯å¹…â†“é¢‘ç‡â†‘
    # 
    # v3 (2/03 AM): q_pos=5, q_theta=8, r_w=10, r_dw=15, w_max=0.3
    #               ç»“æœ: è§’é€Ÿåº¦é¥±å’Œ54.2%, æ–¹å‘åè½¬0.30Hz, æ¨ªå‘åå·®Â±1.2m
    #               é—®é¢˜: Q_poså¤ªå°å¯¼è‡´çº åä¸åŠæ—¶, w_maxå¤ªå°å¯¼è‡´æ§åˆ¶å™¨å—é™
    # 
    # v4 (2/03 PM): q_pos=10, q_theta=12, r_w=6, r_dw=12, w_max=0.5
    #               é—®é¢˜: ä»æœ‰Så½¢æŒ¯è¡! æ ¹æœ¬åŸå› æ˜¯ Unicycle æ¨¡å‹ä¸å®èˆ¹ä¸åŒ¹é…
    #
    # ========== v5 (2/03): ä¸€é˜¶æƒ¯æ€§è½¬å‘æ¨¡å‹ - æ ¹æ²»Så½¢æŒ¯è¡ ==========
    # æ ¸å¿ƒæ”¹è¿›:
    #   1. çŠ¶æ€æ‰©å±•: [x,y,Î¸] â†’ [x,y,Î¸,Ï‰_actual] (4ç»´)
    #   2. åŠ¨åŠ›å­¦: Î¸Ì‡=Ï‰_cmd â†’ Î¸Ì‡=Ï‰_actual, Ï„Â·Ï‰Ì‡+Ï‰=Ï‰_cmd
    #   3. ä»£ä»·: ç‚¹å¯¹ç‚¹ â†’ CTE + èˆªçº¿æ–¹å‘
    #
    # æ–°å‚æ•°è¯´æ˜:
    #   tau_omega: è½¬å‘æ—¶é—´å¸¸æ•° (ç§’), æ¨¡æ‹Ÿèˆ¹çš„è½¬å‘æƒ¯æ€§
    #              - èˆ¹ä»å‘å‡ºå‘½ä»¤åˆ°å®é™…è§’é€Ÿåº¦è¾¾åˆ°63.2%çš„æ—¶é—´
    #              - æ¨è 0.3~0.6, è¶Šå¤§é¢„æµ‹è½¬å‘è¶Šæ…¢
    #   q_cte:     Cross Track Erroræƒé‡, æ§åˆ¶æ¨ªå‘åå·®
    #              - æ¨è 10.0~30.0, è¶Šå¤§èµ°çº¿è¶Šç²¾ç¡®
    #
    mpc_prediction_steps: 20                # é¢„æµ‹æ­¥æ•° N (dt=0.1s, N=20 -> é¢„æµ‹2.0ç§’)
    mpc_weight_pos: 10.0                    # Q_pos: æ²¿èˆªçº¿è¿›åº¦æƒé‡
    mpc_weight_heading: 8.0                 # Q_theta: èˆªå‘è¯¯å·®æƒé‡ (v5é€‚å½“é™ä½)
    mpc_weight_steering: 15.0               # R_w: è§’é€Ÿåº¦æƒ©ç½š (v9: 5â†’15, å¹³è¡¡CTEä»£ä»·, æ¶ˆé™¤bang-bang)
    mpc_weight_steering_rate: 25.0          # R_dw: è§’åŠ é€Ÿåº¦æƒ©ç½š (v9: 10â†’25, å¼ºåˆ¶å¹³æ»‘è¿‡æ¸¡)
    
    # v5 æ–°å¢å‚æ•° (ä¸€é˜¶æƒ¯æ€§è½¬å‘æ¨¡å‹)
    mpc_tau_omega: 0.4                      # è½¬å‘æ—¶é—´å¸¸æ•° (ç§’) - æ ¸å¿ƒå‚æ•°!
                                            # è°ƒå‚å»ºè®®:
                                            #   - è¿˜åœ¨ç”»é¾™ â†’ è°ƒå¤§åˆ° 0.5~0.6
                                            #   - å“åº”è¿Ÿé’ â†’ è°ƒå°åˆ° 0.3
    mpc_weight_cte: 12.0                    # Cross Track Erroræƒé‡ (v9: 15â†’12, ç•¥æ”¾æ¾æ¢å¹³æ»‘)
                                            # è°ƒå‚å»ºè®®:
                                            #   - æ¨ªå‘åå·®å¤§ â†’ è°ƒå¤§åˆ° 15~20
                                            #   - è½¨è¿¹ä¸å¹³æ»‘ â†’ è°ƒå°åˆ° 8~10
    
    # ========== v6 (2/04): é€Ÿåº¦è‡ªé€‚åº” tau_omega - æ ¹æ²»ä½é€ŸSå½¢æŒ¯è¡ ==========
    # æ ¸å¿ƒåŸç†:
    #   - èˆ¹èˆ¶è½¬å‘å“åº”ä¸é€Ÿåº¦ç›¸å…³: é«˜é€Ÿæ—¶èˆµæ•ˆå¥½(tauå°), ä½é€Ÿæ—¶èˆµæ•ˆå·®(tauå¤§)
    #   - ä½¿ç”¨å›ºå®š tau_omega ä¼šå¯¼è‡´ä½é€Ÿæ—¶æ¨¡å‹å¤±é… â†’ Så½¢æŒ¯è¡
    #   - è‡ªé€‚åº” tau_omega ä½¿åŒä¸€å¥—å‚æ•°é€‚ç”¨äºæ‰€æœ‰èˆ¹åªï¼Œæ— éœ€å•ç‹¬è°ƒå‚
    #
    # å‚æ•°è¯´æ˜:
    #   adaptive_tau_enabled: å¯ç”¨é€Ÿåº¦è‡ªé€‚åº” tau_omega
    #   tau_omega_low_speed: ä½é€Ÿæ—¶çš„ tau_omega (èˆ¹è½¬å‘æ…¢, tau å¤§)
    #   tau_omega_high_speed: é«˜é€Ÿæ—¶çš„ tau_omega (èˆ¹è½¬å‘å¿«, tau å°)
    #   tau_speed_threshold_low/high: ä½/é«˜é€Ÿé˜ˆå€¼
    #
    adaptive_tau_enabled: true              # å¯ç”¨é€Ÿåº¦è‡ªé€‚åº” tau_omega (æ¨èå¼€å¯)
    tau_omega_low_speed: 0.8                # ä½é€Ÿæ—¶ tau_omega (ç§’)
    tau_omega_high_speed: 0.4               # é«˜é€Ÿæ—¶ tau_omega (ç§’)
    tau_speed_threshold_low: 0.20           # ä½é€Ÿé˜ˆå€¼ (m/s)
    tau_speed_threshold_high: 0.50          # é«˜é€Ÿé˜ˆå€¼ (m/s)
    
    # ==================== é€Ÿåº¦å‚æ•° ====================
    cruise_speed: 0.6                       # å·¡èˆªé€Ÿåº¦ï¼ˆm/sï¼‰
    max_angular_velocity: 0.35              # æœ€å¤§è§’é€Ÿåº¦ï¼ˆrad/sï¼‰(v9: 0.5â†’0.35, v=0.3æ—¶è½¬å¼¯åŠå¾„0.86m)
    min_speed: 0.3                         # æœ€å°é€Ÿåº¦ï¼ˆm/sï¼‰
    
    # ==================== åˆ°è¾¾åˆ¤æ–­ ====================
    # âš ï¸ è¿™ä¸¤ä¸ªå‚æ•°ä¸ navigate_to_point_node çš„é˜ˆå€¼é€šè¿‡è¯é¢˜è‡ªåŠ¨åŒæ­¥
    #    è¿è¡Œæ—¶é€šè¿‡ set_nav_arrival_threshold / set_nav_switch_threshold è¯é¢˜ç»Ÿä¸€è®¾ç½®
    goal_tolerance: 1.5                   # æœ€ç»ˆèˆªç‚¹åˆ°è¾¾é˜ˆå€¼ï¼ˆç±³ï¼‰- åŒæ­¥è‡ª nav_arrival_threshold
    switch_tolerance: 1.5                   # ä¸­é—´èˆªç‚¹åˆ‡æ¢é˜ˆå€¼ï¼ˆç±³ï¼‰- åŒæ­¥è‡ª nav_switch_threshold
    
    # ==================== æ§åˆ¶å‚æ•° ====================
    control_rate: 20.0                      # æ§åˆ¶é¢‘ç‡ï¼ˆHzï¼‰
    angular_velocity_filter: 0.4            # è§’é€Ÿåº¦æ»¤æ³¢åŸºç¡€ç³»æ•°ï¼ˆè‡ªé€‚åº”èŒƒå›´ 0.3-0.7ï¼‰
    
    # ==================== å®‰å…¨å‚æ•° ====================
    require_guided_mode: true               # æ˜¯å¦éœ€è¦GUIDEDæ¨¡å¼
    require_armed: true                     # æ˜¯å¦éœ€è¦è§£é”
    
    # ==================== L1é£æ ¼èˆªå‘ä¼°è®¡å‚æ•° ====================
    use_velocity_based_heading: true        # å¯ç”¨é€Ÿåº¦æ–¹å‘èˆªå‘ä¼°è®¡ï¼ˆæ¨èï¼‰
    min_speed_for_velocity_heading: 0.2    # ä½¿ç”¨é€Ÿåº¦èˆªå‘çš„æœ€å°é€Ÿåº¦ï¼ˆm/sï¼‰
    
    # ========== v8 (2/09): AMPC è‡ªé€‚åº”MPC - åœ¨çº¿è¾¨è¯† tau_omega ==========
    # æ ¸å¿ƒåŸç†:
    #   1. èˆªå‘é€Ÿç‡è§‚æµ‹å™¨: ä»å®æµ‹èˆªå‘å˜åŒ–ä¼°è®¡ Ï‰_actual (æ›¿ä»£ MPC è‡ªé¢„æµ‹)
    #      æ‰“ç ´ "æ¨¡å‹å¤±é… â†’ é”™è¯¯é¢„æµ‹ â†’ é—®é¢˜æ”¾å¤§" çš„æ­£åé¦ˆå¾ªç¯
    #   2. RLS åœ¨çº¿è¾¨è¯†: æ¯è‰˜èˆ¹çš„çœŸå® Ï„_omega è‡ªåŠ¨ä¼°è®¡
    #      æ¶ˆé™¤é€èˆ¹æ‰‹å·¥è°ƒå‚éœ€æ±‚
    #   3. é¥±å’Œæ„ŸçŸ¥: æŒç»­é¥±å’Œæ—¶è‡ªåŠ¨å¢å¤§ Ï„ å¸®åŠ©è„±å‡º
    #
    # ä¼˜åŠ¿:
    #   - æ‰€æœ‰ USV ä½¿ç”¨ç›¸åŒå‚æ•°ï¼Œè‡ªåŠ¨é€‚åº”å„èˆ¹çš„ç¡¬ä»¶å·®å¼‚
    #   - è‡ªåŠ¨é€‚åº”æ—¶å˜æ¡ä»¶ (ç”µæ± è¡°å‡/æ°´æµ/è‡æ—‹æ¡¨ç¼ ç»•)
    #   - ampc_enabled=false æ—¶é€€åŒ–ä¸ºæ ‡å‡† MPC v5 + v6 é€Ÿåº¦è‡ªé€‚åº”
    #
    ampc_enabled: true                      # å¯ç”¨ AMPC åœ¨çº¿è¾¨è¯† (æ¨è true)
    ampc_rls_forgetting_factor: 0.97        # RLS é—å¿˜å› å­ Î» (0.9-0.99)
                                            #   è¶Šå° â†’ é€‚åº”è¶Šå¿«ä½†è¶Šåµ
                                            #   è¶Šå¤§ â†’ è¶Šç¨³å®šä½†é€‚åº”è¶Šæ…¢
    ampc_heading_observer_alpha: 0.3        # èˆªå‘é€Ÿç‡æ»¤æ³¢ç³»æ•° (0-1)
                                            #   è¶Šå¤§ â†’ è·Ÿè¸ªè¶Šå¿«ä½†è¶Šåµ
                                            #   è¶Šå° â†’ è¶Šå¹³æ»‘ä½†å»¶è¿Ÿè¶Šå¤§
    ampc_tau_min: 0.20                      # Ï„ ä¼°è®¡ä¸‹é™ (ç§’) (v9: 0.1â†’0.20, é˜²æ­¢ä¸ç°å®çš„è¶…å¿«å“åº”)
    ampc_tau_max: 1.5                       # Ï„ ä¼°è®¡ä¸Šé™ (ç§’) (v9b: 3.0â†’1.5, USVçœŸå®Ï„ä¸è¶…è¿‡1.5s)
    ampc_rebuild_threshold: 0.15            # Ï„ å˜åŒ–è¶…æ­¤æ¯”ä¾‹æ‰é‡å»º MPC
    ampc_saturation_tau_boost: 1.02          # æ…¢æ€§é¥±å’Œæ—¶ Ï„ å‡å‹å› å­ (v9b: 1.15â†’1.02, è®©RLSè‡ªè¡Œè¾¨è¯†)

# =============================================================================
# ä¼ æ„Ÿå™¨é©±åŠ¨æ¨¡å—å‚æ•°
# =============================================================================
/**/usv_uwb_node:
  ros__parameters:
    dummy_param: true                       # å ä½å‚æ•°

# =============================================================================
# è¾…åŠ©åŠŸèƒ½æ¨¡å—å‚æ•°
# =============================================================================
/**/usv_head_action_node:
  ros__parameters:
    # é»˜è®¤ä¸ºæ— ç¡¬ä»¶æ¨¡å¼ï¼Œé¿å…åœ¨æ—  I2C/PCA9685 ç¯å¢ƒå´©æºƒ
    enable_head_actuator: true             # è®¾ç½®ä¸º true ä»¥å¯ç”¨å®é™…ç¡¬ä»¶æ§åˆ¶

/**/usv_fan_node:
  ros__parameters:
    # é£æ‰‡æ§åˆ¶å¼•è„šé…ç½®
    fan_pin: 17                             # BCMç¼–å·ï¼ŒGPIO17
    gpio_chip: gpiochip4                    # GPIOèŠ¯ç‰‡åç§°
    # æ¸©åº¦é˜ˆå€¼é…ç½®ï¼ˆå•ä½ï¼šæ¯«æ‘„æ°åº¦ï¼‰
    temp_threshold_on: 50000                # é£æ‰‡å¼€å¯æ¸©åº¦é˜ˆå€¼ 50Â°C
    temp_threshold_off: 45000               # é£æ‰‡å…³é—­æ¸©åº¦é˜ˆå€¼ 45Â°C

/**/usv_led_node:
  ros__parameters:
    # LEDæ§åˆ¶ä¸²å£é…ç½®
    port: /dev/ttyUSB0                      # ä¸²å£è®¾å¤‡è·¯å¾„
    baudrate: 115200                        # æ³¢ç‰¹ç‡
    # LEDæ•ˆæœé…ç½®
    color_list: [255, 0, 0, 255, 127, 0, 255, 255, 0, 0, 255, 0, 0, 255, 255, 0, 0, 255, 139, 0, 255]  # é¢œè‰²åˆ—è¡¨ [R,G,B,R,G,B,...]
    timer_period_high: 0.03                 # é«˜é¢‘å®šæ—¶å™¨å‘¨æœŸï¼ˆç§’ï¼‰
    timer_period_low: 0.5                   # ä½é¢‘å®šæ—¶å™¨å‘¨æœŸï¼ˆç§’ï¼‰
    transition_duration: 3.0                # é¢œè‰²æ¸å˜æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰
    hold_duration: 10.0                     # é¢œè‰²åœç•™æ—¶é—´ï¼ˆç§’ï¼‰
    breath_step: 6                          # å‘¼å¸ç¯æ­¥è¿›å€¼

/**/usv_sound_node:
  ros__parameters:
    # å£°éŸ³æ’­æ”¾é…ç½®  
    sound_types: ['gaga101', 'gaga102', 'gaga103', 'gaga104']  # å¸¸è§„å£°éŸ³ç±»å‹åˆ—è¡¨
    moon_type: 'moon101'                    # ä½ç”µé‡å£°éŸ³ç±»å‹
    min_play_interval: 2                    # æœ€å°æ’­æ”¾é—´éš”ï¼ˆç§’ï¼‰
    max_play_interval: 10                   # æœ€å¤§æ’­æ”¾é—´éš”ï¼ˆç§’ï¼‰
    min_play_count: 1                       # æœ€å°æ’­æ”¾æ¬¡æ•°
    max_play_count: 3                       # æœ€å¤§æ’­æ”¾æ¬¡æ•°

# =============================================================================
# USV_03 ä¸“ç”¨å‚æ•°é…ç½® (v8 æ›´æ–°)
# 
# v8 æ›´æ–° (2026-02-09):
# AMPC å¯ç”¨åï¼Œä¸å†éœ€è¦é€èˆ¹æ‰‹å·¥è°ƒå‚ã€‚
# ä»¥ä¸‹å‚æ•°å…¨éƒ¨å›é€€åˆ°ä¸ USV_02 ç›¸åŒçš„é»˜è®¤å€¼ã€‚
# AMPC ä¼šåœ¨çº¿è¾¨è¯† USV_03 çš„çœŸå® Ï„_omegaï¼Œè‡ªåŠ¨è¡¥å¿ç¡¬ä»¶å·®å¼‚ã€‚
#
# å†å²è®°å½• (v7, å·²åºŸå¼ƒ):
# - é—®é¢˜: USV_03 åœ¨ yaw_rate æ¨¡å¼ä¸‹ S å½¢æŒ¯è¡(47%è½¬å‘é¥±å’Œ)
# - v7 æ–¹æ¡ˆ: æ‰‹å·¥å¢å¤§ tau=1.2s, r_w=15, w_max=0.35 â†’ æ²»æ ‡ä¸æ²»æœ¬
# - v8 æ–¹æ¡ˆ: AMPC åœ¨çº¿è¾¨è¯† â†’ è‡ªåŠ¨é€‚åº”ï¼Œæ— éœ€å•ç‹¬è°ƒå‚
# =============================================================================
/usv_03/velocity_controller_node:
  ros__parameters:
    # v8: å›é€€æ‰€æœ‰å‚æ•°åˆ°é»˜è®¤å€¼, ç”± AMPC è‡ªåŠ¨é€‚åº”
    # å¦‚æœ AMPC æ•ˆæœä¸ä½³, å¯å°† ampc_enabled è®¾ä¸º false å¹¶å–æ¶ˆä¸‹æ–¹æ³¨é‡Šå›é€€åˆ° v7
    ampc_enabled: true                      # AMPC åœ¨çº¿è¾¨è¯†
    
    # v7 å‚æ•°å¤‡ä»½ (å¦‚æœ AMPC æ•ˆæœä¸ç†æƒ³ï¼Œå–æ¶ˆä»¥ä¸‹æ³¨é‡Šå¹¶è®¾ ampc_enabled: false)
    # mpc_tau_omega: 1.2
    # adaptive_tau_enabled: true
    # tau_omega_low_speed: 1.5
    # tau_omega_high_speed: 1.0
    # tau_speed_threshold_low: 0.15
    # tau_speed_threshold_high: 0.35
    # mpc_weight_steering: 15.0
    # mpc_weight_steering_rate: 20.0
    # mpc_weight_cte: 20.0
    # max_angular_velocity: 0.35
    # angular_velocity_filter: 0.5