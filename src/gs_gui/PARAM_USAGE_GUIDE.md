# å‚æ•°ç®¡ç†åŠŸèƒ½å¿«é€Ÿä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨ç³»ç»Ÿ

```bash
# ç»ˆç«¯ 1: å¯åŠ¨åœ°é¢ç«™
source ~/usv_workspace/install/setup.bash
ros2 launch gs_bringup gs_launch.py

# ç»ˆç«¯ 2: å¯åŠ¨ USVï¼ˆéœ€è¿æ¥çœŸå®é£æ§ï¼‰
source ~/usv_workspace/install/setup.bash
ros2 launch usv_bringup usv_launch.py namespace:=usv_01 fcu_url:=serial:///dev/ttyACM0:921600
```

### 2. æ‰“å¼€å‚æ•°é…ç½®

1. åœ¨åœ°é¢ç«™ GUI ä¸­é€‰æ‹©ä¸€ä¸ªåœ¨çº¿ USV
2. ç‚¹å‡»è¯¦ç»†ä¿¡æ¯é¢æ¿ä¸­çš„ **âš™ï¸ é£æ§å‚æ•°é…ç½®** æŒ‰é’®
3. ç­‰å¾…å‚æ•°åŠ è½½å®Œæˆ
   - **é¦–æ¬¡**: 10-30 ç§’ï¼ˆä»é£æ§åŠ è½½ï¼‰
   - **äºŒæ¬¡**: < 1 ç§’ï¼ˆä»ç¼“å­˜åŠ è½½ï¼‰ âš¡

### 3. æŸ¥çœ‹å’Œä¿®æ”¹å‚æ•°

- **å·¦ä¾§**ï¼šå‚æ•°åˆ†ç»„åˆ—è¡¨ï¼ˆæŒ‰å‰ç¼€åˆ†ç»„ï¼‰
- **å³ä¾§**ï¼šå‚æ•°è¯¦æƒ…è¡¨æ ¼
- **é¡¶éƒ¨**ï¼šæœç´¢æ¡†ã€åˆ·æ–°ã€ä¿å­˜ã€é‡ç½®ã€æ¸…é™¤ç¼“å­˜æŒ‰é’®

**æ“ä½œç¤ºä¾‹**ï¼š

```
1. åœ¨æœç´¢æ¡†è¾“å…¥ "ARMING" æŸ¥æ‰¾è§£é”ç›¸å…³å‚æ•°
2. åŒå‡»å‚æ•°å€¼å•å…ƒæ ¼è¿›è¡Œä¿®æ”¹
3. ä¿®æ”¹åå‚æ•°ä¼šé«˜äº®æ˜¾ç¤º
4. ç‚¹å‡»"ğŸ’¾ ä¿å­˜"åº”ç”¨ä¿®æ”¹
```

## âš¡ æ–°åŠŸèƒ½ï¼šå‚æ•°ç¼“å­˜ (Phase 3)

### ç¼“å­˜æœºåˆ¶

**è‡ªåŠ¨ç¼“å­˜**:
- ä»é£æ§æˆåŠŸåŠ è½½å‚æ•°åè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°
- ç¼“å­˜ä½ç½®: `~/.cache/usv_params/{namespace}.json`
- ç¼“å­˜æœ‰æ•ˆæœŸ: 24 å°æ—¶

**æ™ºèƒ½åŠ è½½**:
```
æ‰“å¼€å‚æ•°çª—å£
    â†“
æ£€æŸ¥ç¼“å­˜ï¼Ÿ
    â”œâ”€ æœ‰æ•ˆ â†’ ç«‹å³åŠ è½½ï¼ˆ< 1 ç§’ï¼‰ âš¡
    â””â”€ æ— æ•ˆ/è¿‡æœŸ â†’ ä»é£æ§åŠ è½½ï¼ˆ10-30 ç§’ï¼‰
```

### ä½¿ç”¨åœºæ™¯

#### åœºæ™¯ 1: æ—¥å¸¸ä½¿ç”¨ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰

```bash
# æ‰“å¼€å‚æ•°é…ç½®çª—å£

# çŠ¶æ€æ æ˜¾ç¤º: "ä»ç¼“å­˜åŠ è½½å‚æ•°... (ç¼“å­˜æ—¶é—´: 2å°æ—¶30åˆ†é’Ÿå‰)"
# å‚æ•°ç«‹å³æ˜¾ç¤ºï¼ˆ< 1 ç§’ï¼‰
# å¯ä»¥æ­£å¸¸æŸ¥çœ‹å’Œä¿®æ”¹å‚æ•°
```

#### åœºæ™¯ 2: å¼ºåˆ¶åˆ·æ–°

```bash
# å¦‚æœæ€€ç–‘å‚æ•°å·²åœ¨é£æ§ä¸­è¢«ä¿®æ”¹ï¼š
# 1. ç‚¹å‡» "ğŸ”„ åˆ·æ–°" æŒ‰é’®
# 2. ä»é£æ§é‡æ–°åŠ è½½ï¼ˆ10-30 ç§’ï¼‰
# 3. è‡ªåŠ¨æ›´æ–°ç¼“å­˜
```

#### åœºæ™¯ 3: æ¸…é™¤ç¼“å­˜

```bash
# ç‚¹å‡» "ğŸ—‘ï¸ æ¸…é™¤ç¼“å­˜" æŒ‰é’®

# æ˜¾ç¤ºç¼“å­˜ä¿¡æ¯å¯¹è¯æ¡†ï¼š
# - ç¼“å­˜æ–‡ä»¶è·¯å¾„
# - ç¼“å­˜æ—¶é—´
# - å‚æ•°æ•°é‡

# ç¡®è®¤åæ¸…é™¤
# ä¸‹æ¬¡æ‰“å¼€å°†ä»é£æ§é‡æ–°åŠ è½½
```

### ç¼“å­˜ç®¡ç†

**æŸ¥çœ‹ç¼“å­˜æ–‡ä»¶**:
```bash
ls -lh ~/.cache/usv_params/

# è¾“å‡ºç¤ºä¾‹:
# usv_01.json  150K  2025-11-04 10:30
# usv_02.json  148K  2025-11-04 09:15
```

**æ‰‹åŠ¨æ¸…ç†**:
```bash
# åˆ é™¤æ‰€æœ‰ç¼“å­˜
rm -rf ~/.cache/usv_params/

# åˆ é™¤ç‰¹å®š USV çš„ç¼“å­˜
rm ~/.cache/usv_params/usv_01.json
```

## ğŸ“Š UI è¯´æ˜

### è¿›åº¦æŒ‡ç¤º

åŠ è½½è¿‡ç¨‹ä¸­ä¼šæ˜¾ç¤ºï¼š
- **è¿›åº¦æ¡**: 0% â†’ 100%
- **çŠ¶æ€æ **: "æ­£åœ¨åŠ è½½å‚æ•°... 150/500 (30%)"
- **æ—¥å¿—**: æ¯ 50 ä¸ªå‚æ•°è®°å½•ä¸€æ¬¡

### å‚æ•°è¡¨æ ¼åˆ—

| åˆ—å | è¯´æ˜ | å¯ç¼–è¾‘ |
|------|------|--------|
| å‚æ•°å | å‚æ•°æ ‡è¯†ç¬¦ï¼ˆå¦‚ ARMING_CHECKï¼‰ | âŒ |
| å½“å‰å€¼ | å½“å‰è®¾ç½®çš„å€¼ | âœ… |
| åŸå§‹å€¼ | åŠ è½½æ—¶çš„åŸå§‹å€¼ | âŒ |
| åˆ†ç»„ | å‚æ•°æ‰€å±åˆ†ç»„ | âŒ |
| æè¿° | å‚æ•°è¯´æ˜ï¼ˆPhase 3 æ·»åŠ ï¼‰ | âŒ |

### æŒ‰é’®åŠŸèƒ½

- **ğŸ”„ åˆ·æ–°**: ä»é£æ§é‡æ–°åŠ è½½å‚æ•°ï¼ˆä¼šæ›´æ–°ç¼“å­˜ï¼‰
- **ğŸ’¾ ä¿å­˜**: ä¿å­˜æ‰€æœ‰ä¿®æ”¹åˆ°é£æ§
- **â†º é‡ç½®**: æ’¤é”€æ‰€æœ‰æœªä¿å­˜çš„ä¿®æ”¹
- **ğŸ—‘ï¸ æ¸…é™¤ç¼“å­˜**: åˆ é™¤æœ¬åœ°ç¼“å­˜æ–‡ä»¶ï¼ˆPhase 3 æ–°å¢ï¼‰

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. MAVROS param æ’ä»¶å¿…é¡»å¯ç”¨

æ£€æŸ¥ `usv_launch.py` ä¸­æ˜¯å¦åŒ…å«ï¼š

```python
'plugin_allowlist': [
    # ... å…¶ä»–æ’ä»¶ ...
    'param',  # â† å¿…éœ€
],
```

### 2. é£æ§å¿…é¡»åœ¨çº¿

- ç¡®ä¿ USV å·²è¿æ¥å¹¶æ­£å¸¸é€šä¿¡
- æ£€æŸ¥ MAVROS çŠ¶æ€ï¼š`ros2 topic echo /usv_01/mavros/state`

### 3. å‚æ•°ä¿®æ”¹é£é™©

âš ï¸ **è­¦å‘Š**: æŸäº›å‚æ•°ä¿®æ”¹å¯èƒ½å¯¼è‡´é£æ§å¼‚å¸¸æˆ–æ— æ³•è§£é”ï¼

**æ¨èåšæ³•**ï¼š
- ä¿®æ”¹å‰è®°å½•åŸå§‹å€¼
- ä¸€æ¬¡åªä¿®æ”¹ä¸€ä¸ªå‚æ•°
- ä¿®æ”¹åæµ‹è¯•é£æ§çŠ¶æ€
- é‡è¦å‚æ•°å»ºè®®ä½¿ç”¨ QGC ä¿®æ”¹

### 4. å¸¸è§å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | å…¸å‹å€¼ | ä¿®æ”¹é£é™© |
|------|------|--------|---------|
| ARMING_CHECK | è§£é”æ£€æŸ¥é¡¹ | 1 (å¯ç”¨) | âš ï¸ é«˜ |
| ARMING_VOLT_MIN | æœ€ä½ç”µå‹ | 10.5V | âš ï¸ é«˜ |
| SYSID_THISMAV | MAVLink ID | 1-255 | âš ï¸ é«˜ |
| GPS_TYPE | GPS ç±»å‹ | 1 (è‡ªåŠ¨) | âš ï¸ ä¸­ |
| COMPASS_USE | æŒ‡å—é’ˆä½¿ç”¨ | 1 (å¯ç”¨) | âš ï¸ ä¸­ |
| FRAME_TYPE | æœºæ¶ç±»å‹ | 2 (Rover) | âš ï¸ æé«˜ |

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šå‚æ•°ä¸€ç›´åŠ è½½ä¸­

**å¯èƒ½åŸå› **ï¼š
1. MAVROS param æ’ä»¶æœªå¯ç”¨
2. é£æ§æœªè¿æ¥æˆ–é€šä¿¡ä¸­æ–­
3. ä¸²å£æ³¢ç‰¹ç‡ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ MAVROS çŠ¶æ€
ros2 topic list | grep mavros

# æ£€æŸ¥å‚æ•°æœåŠ¡æ˜¯å¦å¯ç”¨
ros2 service list | grep param

# æŸ¥çœ‹ MAVROS æ—¥å¿—
ros2 topic echo /rosout | grep mavros
```

### é—®é¢˜ï¼šåŠ è½½è¶…æ—¶

**ç°è±¡**: 60 ç§’åæ˜¾ç¤º"å‚æ•°åŠ è½½è¶…æ—¶"

**å¯èƒ½åŸå› **ï¼š
- å‚æ•°æ•°é‡è¿‡å¤šï¼ˆ>600 ä¸ªï¼‰
- ä¸²å£æ³¢ç‰¹ç‡è¿‡ä½ï¼ˆ< 115200ï¼‰
- é£æ§å“åº”ç¼“æ…¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨æ›´é«˜çš„æ³¢ç‰¹ç‡ï¼ˆ921600 æ¨èï¼‰
- å¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆä¿®æ”¹ä»£ç ä¸­çš„ `timeout_sec`ï¼‰
- æ£€æŸ¥é£æ§å›ºä»¶ç‰ˆæœ¬

### é—®é¢˜ï¼šä¿®æ”¹ä¿å­˜å¤±è´¥

**ç°è±¡**: ç‚¹å‡»"ä¿å­˜"åæç¤ºå¤±è´¥

**å¯èƒ½åŸå› **ï¼š
1. å‚æ•°å€¼è¶…å‡ºèŒƒå›´
2. å‚æ•°ä¸ºåªè¯»
3. é£æ§æ‹’ç»ä¿®æ”¹

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥å‚æ•°å€¼æ˜¯å¦åˆç†
- æŸ¥çœ‹ MAVROS æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯
- å°è¯•ä½¿ç”¨ QGC ä¿®æ”¹éªŒè¯

## ğŸ”§ é«˜çº§ç”¨æ³•

### ä½¿ç”¨å‘½ä»¤è¡ŒæŸ¥çœ‹å‚æ•°

```bash
# æŸ¥çœ‹æ‰€æœ‰å‚æ•°ï¼ˆéœ€è¦ MAVROS param æ’ä»¶ï¼‰
ros2 service call /usv_01/mavros/param/pull mavros_msgs/srv/ParamPull

# è·å–å•ä¸ªå‚æ•°
ros2 service call /usv_01/mavros/param/get mavros_msgs/srv/ParamGet \
  "{param_id: 'ARMING_CHECK'}"

# è®¾ç½®å‚æ•°ï¼ˆæ•´æ•°ï¼‰
ros2 service call /usv_01/mavros/param/set mavros_msgs/srv/ParamSet \
  "{param_id: 'ARMING_CHECK', value: {integer: 1, real: 0.0}}"

# è®¾ç½®å‚æ•°ï¼ˆæµ®ç‚¹ï¼‰
ros2 service call /usv_01/mavros/param/set mavros_msgs/srv/ParamSet \
  "{param_id: 'ARMING_VOLT_MIN', value: {integer: 0, real: 10.5}}"
```

### ç›‘å¬å‚æ•°å˜åŒ–

```bash
# ç›‘å¬å‚æ•° topic
ros2 topic echo /usv_01/mavros/param/param_value
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å®ç°æ€»ç»“**: `PARAM_PHASE2_SUMMARY.md`
- **é—®é¢˜è¯´æ˜**: `PARAM_LOADING_ISSUE.md`
- **è®¾è®¡æ–‡æ¡£**: `PARAM_MANAGER_DESIGN.md`
- **ç”¨æˆ·æŒ‡å—**: `PARAM_MANAGER_GUIDE.md`

## â“ å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆåŠ è½½è¿™ä¹ˆæ…¢ï¼Ÿ**  
A: MAVROS éœ€è¦é€ä¸ªä»é£æ§æ‹‰å–å‚æ•°ï¼Œå—ä¸²å£æ³¢ç‰¹ç‡é™åˆ¶ã€‚ä½¿ç”¨ 921600 æ³¢ç‰¹ç‡å¯åŠ å¿«é€Ÿåº¦ã€‚

**Q: å‚æ•°èƒ½å¦ç¦»çº¿ç¼–è¾‘ï¼Ÿ**  
A: Phase 3 å°†æ”¯æŒå‚æ•°ç¼“å­˜ï¼Œå¯ä»¥ç¦»çº¿æŸ¥çœ‹å†å²å‚æ•°ã€‚ä¿®æ”¹ä»éœ€åœ¨çº¿è¿›è¡Œã€‚

**Q: å¦‚ä½•å¤‡ä»½å‚æ•°ï¼Ÿ**  
A: å½“å‰å¯ä½¿ç”¨ QGC æˆ– Mission Planner å¯¼å‡ºå‚æ•°æ–‡ä»¶ã€‚Phase 3 å°†æ”¯æŒç›´æ¥å¯¼å‡ºã€‚

**Q: ä¿®æ”¹å‚æ•°åéœ€è¦é‡å¯å—ï¼Ÿ**  
A: å¤§å¤šæ•°å‚æ•°ç«‹å³ç”Ÿæ•ˆï¼Œéƒ¨åˆ†å‚æ•°ï¼ˆå¦‚ SYSID_THISMAVï¼‰éœ€è¦é‡å¯é£æ§ã€‚

---

**æœ€åæ›´æ–°**: 2025-11-04  
**åŠŸèƒ½çŠ¶æ€**: Phase 2 å®Œæˆï¼Œå¯ç”¨  
**æ”¯æŒç‰ˆæœ¬**: ROS 2 Humble, ArduPilot 4.x
